--- fs.c	Thu Aug 30 14:29:02 2007 -0400
+++ fs.c	Thu Aug 30 14:32:06 2007 -0400
@@ -577,18 +577,12 @@
 // If parent != 0, return the inode for the parent and copy the final
 // path element into name, which must have room for DIRSIZ bytes.
 static struct inode*
-_namei(struct inode *root, char *path, int parent, char *name, int depth)
+_namei(char *path, int parent, char *name)
 {
   struct inode *ip, *next;
-  char buf[100], tname[DIRSIZ];
-
-  if(depth > 5)
-    return 0;
 
   if(*path == '/')
     ip = iget(ROOTDEV, 1);
-  else if(root)
-    ip = idup(root);
   else
     ip = idup(cp->cwd);
 
@@ -621,11 +601,11 @@
 namei(char *path)
 {
   char name[DIRSIZ];
-  return _namei(0, path, 0, name, 0);
+  return _namei(path, 0, name);
 }
 
 struct inode*
 nameiparent(char *path, char *name)
 {
-  return _namei(0, path, 1, name, 0);
-}
+  return _namei(path, 1, name);
+}
